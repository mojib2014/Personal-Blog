{"ast":null,"code":"import http from \"./httpService\";\nimport jwtDecode from \"jwt-decode\";\nhttp.setJWT(getJWT());\n\nasync function login(email, password) {\n  try {\n    const {\n      data: jwt\n    } = await http.post(\"/auth/login\", {\n      email,\n      password\n    });\n    localStorage.setItem(\"token\", jwt);\n  } catch (err) {\n    return err.response;\n  }\n}\n\nfunction loginWithJwt(jwt) {\n  localStorage.setItem(\"token\", jwt);\n}\n\nexport const logout = () => {\n  localStorage.removeItem(\"token\");\n};\n\nfunction getCurrentUser() {\n  try {\n    const jwt = localStorage.getItem(\"token\");\n    console.log(jwtDecode(jwt));\n    return jwtDecode(jwt);\n  } catch (ex) {\n    return null; // that means we don't have the current user.\n  } // if there is an error we ignore that cause tachnically it's not our\n  // application error.\n\n}\n\nfunction getJWT() {\n  return localStorage.getItem(\"token\");\n}\n\nexport default {\n  login,\n  loginWithJwt,\n  logout,\n  getCurrentUser,\n  getJWT\n};","map":{"version":3,"sources":["/Users/mojib2014/Desktop/projects/node_projects/blog/client/src/services/authService.js"],"names":["http","jwtDecode","setJWT","getJWT","login","email","password","data","jwt","post","localStorage","setItem","err","response","loginWithJwt","logout","removeItem","getCurrentUser","getItem","console","log","ex"],"mappings":"AAAA,OAAOA,IAAP,MAAiB,eAAjB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AAEAD,IAAI,CAACE,MAAL,CAAYC,MAAM,EAAlB;;AAEA,eAAeC,KAAf,CAAqBC,KAArB,EAA4BC,QAA5B,EAAsC;AACpC,MAAI;AACF,UAAM;AAAEC,MAAAA,IAAI,EAAEC;AAAR,QAAgB,MAAMR,IAAI,CAACS,IAAL,CAAU,aAAV,EAAyB;AAAEJ,MAAAA,KAAF;AAASC,MAAAA;AAAT,KAAzB,CAA5B;AAEAI,IAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BH,GAA9B;AACD,GAJD,CAIE,OAAOI,GAAP,EAAY;AACZ,WAAOA,GAAG,CAACC,QAAX;AACD;AACF;;AAED,SAASC,YAAT,CAAsBN,GAAtB,EAA2B;AACzBE,EAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BH,GAA9B;AACD;;AAED,OAAO,MAAMO,MAAM,GAAG,MAAM;AAC1BL,EAAAA,YAAY,CAACM,UAAb,CAAwB,OAAxB;AACD,CAFM;;AAIP,SAASC,cAAT,GAA0B;AACxB,MAAI;AACF,UAAMT,GAAG,GAAGE,YAAY,CAACQ,OAAb,CAAqB,OAArB,CAAZ;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYnB,SAAS,CAACO,GAAD,CAArB;AACA,WAAOP,SAAS,CAACO,GAAD,CAAhB;AACD,GAJD,CAIE,OAAOa,EAAP,EAAW;AACX,WAAO,IAAP,CADW,CACE;AACd,GAPuB,CAOtB;AACF;;AACD;;AAED,SAASlB,MAAT,GAAkB;AAChB,SAAOO,YAAY,CAACQ,OAAb,CAAqB,OAArB,CAAP;AACD;;AAED,eAAe;AACbd,EAAAA,KADa;AAEbU,EAAAA,YAFa;AAGbC,EAAAA,MAHa;AAIbE,EAAAA,cAJa;AAKbd,EAAAA;AALa,CAAf","sourcesContent":["import http from \"./httpService\";\nimport jwtDecode from \"jwt-decode\";\n\nhttp.setJWT(getJWT());\n\nasync function login(email, password) {\n  try {\n    const { data: jwt } = await http.post(\"/auth/login\", { email, password });\n\n    localStorage.setItem(\"token\", jwt);\n  } catch (err) {\n    return err.response;\n  }\n}\n\nfunction loginWithJwt(jwt) {\n  localStorage.setItem(\"token\", jwt);\n}\n\nexport const logout = () => {\n  localStorage.removeItem(\"token\");\n};\n\nfunction getCurrentUser() {\n  try {\n    const jwt = localStorage.getItem(\"token\");\n    console.log(jwtDecode(jwt));\n    return jwtDecode(jwt);\n  } catch (ex) {\n    return null; // that means we don't have the current user.\n  } // if there is an error we ignore that cause tachnically it's not our\n  // application error.\n}\n\nfunction getJWT() {\n  return localStorage.getItem(\"token\");\n}\n\nexport default {\n  login,\n  loginWithJwt,\n  logout,\n  getCurrentUser,\n  getJWT,\n};\n"]},"metadata":{},"sourceType":"module"}