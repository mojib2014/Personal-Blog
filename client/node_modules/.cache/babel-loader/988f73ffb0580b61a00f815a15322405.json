{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useReducer } from \"react\";\nimport { postReducer, initialState } from \"../reducers/postReducer\";\nimport postService from \"../services/postsService\";\nimport actions from \"../store/actions/actions\";\nimport auth from \"../services/authService\";\nexport default function usePostsState() {\n  _s();\n\n  const [state, dispatch] = useReducer(postReducer, initialState);\n\n  const addPost = async post => {\n    try {\n      dispatch(actions.loading());\n      const user = await auth.getCurrentUser();\n      post.author = user.id;\n      const {\n        data\n      } = await postService.createPost(post);\n      dispatch(actions.addData(data));\n    } catch (err) {\n      dispatch(actions.error(err.response.data || err.message));\n    }\n  };\n\n  const setSelectedPost = post => {\n    try {\n      dispatch(actions.loading());\n      dispatch(actions.setSelectedPost(post));\n    } catch (err) {\n      console.log(\"catcher errr\", err);\n      dispatch(actions.error(err.response.data || err.message));\n    }\n  };\n\n  console.log(\"state: \", state.selectedPost);\n  return [state, dispatch];\n}\n\n_s(usePostsState, \"6JWkGZ32UPfojeNx+xqn8ZU8A0Q=\");","map":{"version":3,"sources":["/Users/mojib2014/Desktop/projects/node_projects/blog/client/src/hooks/usePostsState.js"],"names":["useReducer","postReducer","initialState","postService","actions","auth","usePostsState","state","dispatch","addPost","post","loading","user","getCurrentUser","author","id","data","createPost","addData","err","error","response","message","setSelectedPost","console","log","selectedPost"],"mappings":";;AAAA,SAASA,UAAT,QAA2B,OAA3B;AACA,SAASC,WAAT,EAAsBC,YAAtB,QAA0C,yBAA1C;AACA,OAAOC,WAAP,MAAwB,0BAAxB;AACA,OAAOC,OAAP,MAAoB,0BAApB;AACA,OAAOC,IAAP,MAAiB,yBAAjB;AAEA,eAAe,SAASC,aAAT,GAAyB;AAAA;;AACtC,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBR,UAAU,CAACC,WAAD,EAAcC,YAAd,CAApC;;AAEA,QAAMO,OAAO,GAAG,MAAOC,IAAP,IAAgB;AAC9B,QAAI;AACFF,MAAAA,QAAQ,CAACJ,OAAO,CAACO,OAAR,EAAD,CAAR;AAEA,YAAMC,IAAI,GAAG,MAAMP,IAAI,CAACQ,cAAL,EAAnB;AACAH,MAAAA,IAAI,CAACI,MAAL,GAAcF,IAAI,CAACG,EAAnB;AAEA,YAAM;AAAEC,QAAAA;AAAF,UAAW,MAAMb,WAAW,CAACc,UAAZ,CAAuBP,IAAvB,CAAvB;AAEAF,MAAAA,QAAQ,CAACJ,OAAO,CAACc,OAAR,CAAgBF,IAAhB,CAAD,CAAR;AACD,KATD,CASE,OAAOG,GAAP,EAAY;AACZX,MAAAA,QAAQ,CAACJ,OAAO,CAACgB,KAAR,CAAcD,GAAG,CAACE,QAAJ,CAAaL,IAAb,IAAqBG,GAAG,CAACG,OAAvC,CAAD,CAAR;AACD;AACF,GAbD;;AAeA,QAAMC,eAAe,GAAIb,IAAD,IAAU;AAChC,QAAI;AACFF,MAAAA,QAAQ,CAACJ,OAAO,CAACO,OAAR,EAAD,CAAR;AAEAH,MAAAA,QAAQ,CAACJ,OAAO,CAACmB,eAAR,CAAwBb,IAAxB,CAAD,CAAR;AACD,KAJD,CAIE,OAAOS,GAAP,EAAY;AACZK,MAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BN,GAA5B;AACAX,MAAAA,QAAQ,CAACJ,OAAO,CAACgB,KAAR,CAAcD,GAAG,CAACE,QAAJ,CAAaL,IAAb,IAAqBG,GAAG,CAACG,OAAvC,CAAD,CAAR;AACD;AACF,GATD;;AAWAE,EAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBlB,KAAK,CAACmB,YAA7B;AAEA,SAAO,CAACnB,KAAD,EAAQC,QAAR,CAAP;AACD;;GAhCuBF,a","sourcesContent":["import { useReducer } from \"react\";\nimport { postReducer, initialState } from \"../reducers/postReducer\";\nimport postService from \"../services/postsService\";\nimport actions from \"../store/actions/actions\";\nimport auth from \"../services/authService\";\n\nexport default function usePostsState() {\n  const [state, dispatch] = useReducer(postReducer, initialState);\n\n  const addPost = async (post) => {\n    try {\n      dispatch(actions.loading());\n\n      const user = await auth.getCurrentUser();\n      post.author = user.id;\n\n      const { data } = await postService.createPost(post);\n\n      dispatch(actions.addData(data));\n    } catch (err) {\n      dispatch(actions.error(err.response.data || err.message));\n    }\n  };\n\n  const setSelectedPost = (post) => {\n    try {\n      dispatch(actions.loading());\n\n      dispatch(actions.setSelectedPost(post));\n    } catch (err) {\n      console.log(\"catcher errr\", err);\n      dispatch(actions.error(err.response.data || err.message));\n    }\n  };\n\n  console.log(\"state: \", state.selectedPost);\n\n  return [state, dispatch];\n}\n"]},"metadata":{},"sourceType":"module"}