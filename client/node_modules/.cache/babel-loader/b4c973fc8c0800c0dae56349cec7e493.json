{"ast":null,"code":"var _jsxFileName = \"/Users/mojib2014/Desktop/projects/node_projects/blog/client/src/Profile/profile.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useState, useEffect } from \"react\";\nimport Context from \"../utils/context\";\nimport { Link } from \"react-router-dom\";\nimport history from \"../utils/history\";\nimport axios from \"axios\";\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport CardHeader from \"@material-ui/core/CardHeader\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport Button from \"@material-ui/core/Button\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Profile = () => {\n  _s();\n\n  const context = useContext(Context);\n  const [stateLocal, setState] = useState({\n    open: false,\n    post_id: null,\n    posts: []\n  });\n  useEffect(() => {\n    const user_id = context.dbProfileState[0].uid;\n    axios.get(\"/api/get/userposts\", {\n      params: {\n        user_id: user_id\n      }\n    }).then(res => setState({ ...stateLocal,\n      posts: [...res.data]\n    })).catch(err => console.log(err));\n  });\n\n  const handleClickOpen = pid => {\n    setState({\n      open: true,\n      post_id: pid\n    });\n  };\n\n  const handleClickClose = () => {\n    setState({\n      open: false,\n      post_id: null\n    });\n  };\n\n  const DeletePost = () => {\n    const post_id = stateLocal.post_id;\n    axios.delete(\"api/delete/postcomments\", {\n      data: {\n        post_id: post_id\n      }\n    }).then(() => axios.delete(\"/api/delete/post\", {\n      data: {\n        post_id: post_id\n      }\n    }).then(res => console.log(res))).catch(err => console.log(err)).then(() => handleClickClose()).then(() => setTimeout(() => history.replace(\"/\"), 700));\n  };\n\n  const RenderProfile = props => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: props.profile.profile.nickname\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: props.profile.profile.picture,\n        alt: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n        children: [\" \", props.profile.profile.email]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n        children: [\" \", props.profile.profile.name, \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n        children: \" Email Verified: \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), props.profile.profile.email_verified ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Yes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 49\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 62\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this);\n  };\n\n  const RenderPosts = post => /*#__PURE__*/_jsxDEV(Card, {\n    style: {\n      width: \"500px\",\n      height: \"200px\",\n      marginBottom: \"10px\",\n      paddingBottom: \"80px\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n      title: /*#__PURE__*/_jsxDEV(Link, {\n        to: {\n          pathname: \"/post/\" + post.post.pid,\n          state: {\n            post\n          }\n        },\n        children: post.post.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }, this),\n      subheader: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"FlexColumn\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"FlexRow\",\n          children: post.post.date_created\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"FlexRow\",\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            to: {\n              pathname: \"/editpost/\" + post.post.pid,\n              state: {\n                post\n              }\n            },\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              children: \"Edit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleClickOpen(post.post.pid),\n            children: \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          overflow: \"hidden\"\n        },\n        children: [\" \", post.post.body, \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        to: {\n          pathname: \"/showmessages/\" + context.dbProfileState[0].uid\n        },\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          color: \"primary\",\n          type: \"submit\",\n          children: \"Show Messages\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(RenderProfile, {\n        profile: context.profileState\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: stateLocal.posts ? stateLocal.posts.map(post => /*#__PURE__*/_jsxDEV(RenderPosts, {\n        post: post\n      }, post.pid, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 15\n      }, this)) : null\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: stateLocal.open,\n      onClose: handleClickClose,\n      \"aria-labelledby\": \"alert-dialog-title\",\n      \"aria-describedby\": \"alert-dialog-description\",\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        id: \"alert-dialog-title\",\n        children: \" Confirm Delete? \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        children: [/*#__PURE__*/_jsxDEV(DialogContentText, {\n          id: \"alert-dialog-description\",\n          children: \"Deleteing Post\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            onClick: () => DeletePost(),\n            children: \"Agree\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: () => handleClickClose(),\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 114,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Profile, \"mGIMjEZ/kQxuxv1e+BWBsuO0GoQ=\");\n\n_c = Profile;\nexport default Profile;\n\nvar _c;\n\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"sources":["/Users/mojib2014/Desktop/projects/node_projects/blog/client/src/Profile/profile.js"],"names":["React","useContext","useState","useEffect","Context","Link","history","axios","Card","CardContent","CardHeader","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","Button","Profile","context","stateLocal","setState","open","post_id","posts","user_id","dbProfileState","uid","get","params","then","res","data","catch","err","console","log","handleClickOpen","pid","handleClickClose","DeletePost","delete","setTimeout","replace","RenderProfile","props","profile","nickname","picture","email","name","email_verified","RenderPosts","post","width","height","marginBottom","paddingBottom","pathname","state","title","date_created","overflow","body","profileState","map"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from \"react\";\nimport Context from \"../utils/context\";\n\nimport { Link } from \"react-router-dom\";\nimport history from \"../utils/history\";\nimport axios from \"axios\";\n\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport CardHeader from \"@material-ui/core/CardHeader\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport Button from \"@material-ui/core/Button\";\n\nconst Profile = () => {\n  const context = useContext(Context);\n\n  const [stateLocal, setState] = useState({\n    open: false,\n    post_id: null,\n    posts: [],\n  });\n\n  useEffect(() => {\n    const user_id = context.dbProfileState[0].uid;\n    axios\n      .get(\"/api/get/userposts\", { params: { user_id: user_id } })\n      .then((res) => setState({ ...stateLocal, posts: [...res.data] }))\n      .catch((err) => console.log(err));\n  });\n\n  const handleClickOpen = (pid) => {\n    setState({ open: true, post_id: pid });\n  };\n\n  const handleClickClose = () => {\n    setState({ open: false, post_id: null });\n  };\n\n  const DeletePost = () => {\n    const post_id = stateLocal.post_id;\n    axios\n      .delete(\"api/delete/postcomments\", { data: { post_id: post_id } })\n      .then(() =>\n        axios\n          .delete(\"/api/delete/post\", { data: { post_id: post_id } })\n          .then((res) => console.log(res)),\n      )\n      .catch((err) => console.log(err))\n      .then(() => handleClickClose())\n      .then(() => setTimeout(() => history.replace(\"/\"), 700));\n  };\n\n  const RenderProfile = (props) => {\n    return (\n      <div>\n        <h1>{props.profile.profile.nickname}</h1>\n        <br />\n        <img src={props.profile.profile.picture} alt=\"\" />\n        <br />\n        <h4> {props.profile.profile.email}</h4>\n        <br />\n        <h5> {props.profile.profile.name} </h5>\n        <br />\n        <h6> Email Verified: </h6>\n        {props.profile.profile.email_verified ? <p>Yes</p> : <p>No</p>}\n        <br />\n      </div>\n    );\n  };\n\n  const RenderPosts = (post) => (\n    <Card\n      style={{\n        width: \"500px\",\n        height: \"200px\",\n        marginBottom: \"10px\",\n        paddingBottom: \"80px\",\n      }}\n    >\n      <CardHeader\n        title={\n          <Link to={{ pathname: \"/post/\" + post.post.pid, state: { post } }}>\n            {post.post.title}\n          </Link>\n        }\n        subheader={\n          <div className=\"FlexColumn\">\n            <div className=\"FlexRow\">{post.post.date_created}</div>\n            <div className=\"FlexRow\">\n              <Link\n                to={{ pathname: \"/editpost/\" + post.post.pid, state: { post } }}\n              >\n                <button>Edit</button>\n              </Link>\n              <button onClick={() => handleClickOpen(post.post.pid)}>\n                Delete\n              </button>\n            </div>\n          </div>\n        }\n      />\n      <br />\n      <CardContent>\n        <span style={{ overflow: \"hidden\" }}> {post.post.body} </span>\n      </CardContent>\n    </Card>\n  );\n\n  return (\n    <div>\n      <div>\n        <Link\n          to={{ pathname: \"/showmessages/\" + context.dbProfileState[0].uid }}\n        >\n          <Button variant=\"contained\" color=\"primary\" type=\"submit\">\n            Show Messages\n          </Button>\n        </Link>\n        <RenderProfile profile={context.profileState} />\n      </div>\n      <div>\n        {stateLocal.posts\n          ? stateLocal.posts.map((post) => (\n              <RenderPosts post={post} key={post.pid} />\n            ))\n          : null}\n      </div>\n      <Dialog\n        open={stateLocal.open}\n        onClose={handleClickClose}\n        aria-labelledby=\"alert-dialog-title\"\n        aria-describedby=\"alert-dialog-description\"\n      >\n        <DialogTitle id=\"alert-dialog-title\"> Confirm Delete? </DialogTitle>\n        <DialogContent>\n          <DialogContentText id=\"alert-dialog-description\">\n            Deleteing Post\n          </DialogContentText>\n          <DialogActions>\n            <Button onClick={() => DeletePost()}>Agree</Button>\n            <Button onClick={() => handleClickClose()}>Cancel</Button>\n          </DialogActions>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n};\n\nexport default Profile;\n"]},"metadata":{},"sourceType":"module"}