{"ast":null,"code":"var _jsxFileName = \"/Users/mojib2014/Desktop/projects/node_projects/blog/client/src/utils/authcheck.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useContext } from \"react\";\nimport history from \"./history\";\nimport Context from \"./context\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst AuthCheck = () => {\n  _s();\n\n  const context = useContext(Context);\n  useEffect(() => {\n    if (context.authObj.isAuthenticated()) {\n      const profile = context.authObj.userProfile;\n      context.handleUserLogin();\n      context.handleUserAddProfile(profile);\n      axios.post(\"/api/users/profile/create\", profile).then(axios.get(\"/api/users/profile\", {\n        params: {\n          email: profile.profile.email\n        }\n      }).then(res => context.handleAddDBProfile(res.data))).then(history.replace(\"/\"));\n    } else {\n      context.handleUserLogout();\n      context.handleUserRemoveProfile();\n      history.replace(\"/\");\n    }\n  }, [context.authObj.userProfile, context]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 32,\n    columnNumber: 10\n  }, this);\n};\n\n_s(AuthCheck, \"wqnYpdjMkT3eDhbBjwDmfBO/TFg=\");\n\n_c = AuthCheck;\nexport default AuthCheck;\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthCheck\");","map":{"version":3,"sources":["/Users/mojib2014/Desktop/projects/node_projects/blog/client/src/utils/authcheck.js"],"names":["React","useEffect","useContext","history","Context","axios","AuthCheck","context","authObj","isAuthenticated","profile","userProfile","handleUserLogin","handleUserAddProfile","post","then","get","params","email","res","handleAddDBProfile","data","replace","handleUserLogout","handleUserRemoveProfile"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,UAA3B,QAA6C,OAA7C;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,OAAP,MAAoB,WAApB;AAEA,OAAOC,KAAP,MAAkB,OAAlB;;;AAEA,MAAMC,SAAS,GAAG,MAAM;AAAA;;AACtB,QAAMC,OAAO,GAAGL,UAAU,CAACE,OAAD,CAA1B;AAEAH,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIM,OAAO,CAACC,OAAR,CAAgBC,eAAhB,EAAJ,EAAuC;AACrC,YAAMC,OAAO,GAAGH,OAAO,CAACC,OAAR,CAAgBG,WAAhC;AACAJ,MAAAA,OAAO,CAACK,eAAR;AACAL,MAAAA,OAAO,CAACM,oBAAR,CAA6BH,OAA7B;AACAL,MAAAA,KAAK,CACFS,IADH,CACQ,2BADR,EACqCJ,OADrC,EAEGK,IAFH,CAGIV,KAAK,CACFW,GADH,CACO,oBADP,EAC6B;AACzBC,QAAAA,MAAM,EAAE;AAAEC,UAAAA,KAAK,EAAER,OAAO,CAACA,OAAR,CAAgBQ;AAAzB;AADiB,OAD7B,EAIGH,IAJH,CAISI,GAAD,IAASZ,OAAO,CAACa,kBAAR,CAA2BD,GAAG,CAACE,IAA/B,CAJjB,CAHJ,EASGN,IATH,CASQZ,OAAO,CAACmB,OAAR,CAAgB,GAAhB,CATR;AAUD,KAdD,MAcO;AACLf,MAAAA,OAAO,CAACgB,gBAAR;AACAhB,MAAAA,OAAO,CAACiB,uBAAR;AACArB,MAAAA,OAAO,CAACmB,OAAR,CAAgB,GAAhB;AACD;AACF,GApBQ,EAoBN,CAACf,OAAO,CAACC,OAAR,CAAgBG,WAAjB,EAA8BJ,OAA9B,CApBM,CAAT;AAsBA,sBAAO;AAAA;AAAA;AAAA;AAAA,UAAP;AACD,CA1BD;;GAAMD,S;;KAAAA,S;AA4BN,eAAeA,SAAf","sourcesContent":["import React, { useEffect, useContext } from \"react\";\nimport history from \"./history\";\nimport Context from \"./context\";\n\nimport axios from \"axios\";\n\nconst AuthCheck = () => {\n  const context = useContext(Context);\n\n  useEffect(() => {\n    if (context.authObj.isAuthenticated()) {\n      const profile = context.authObj.userProfile;\n      context.handleUserLogin();\n      context.handleUserAddProfile(profile);\n      axios\n        .post(\"/api/users/profile/create\", profile)\n        .then(\n          axios\n            .get(\"/api/users/profile\", {\n              params: { email: profile.profile.email },\n            })\n            .then((res) => context.handleAddDBProfile(res.data)),\n        )\n        .then(history.replace(\"/\"));\n    } else {\n      context.handleUserLogout();\n      context.handleUserRemoveProfile();\n      history.replace(\"/\");\n    }\n  }, [context.authObj.userProfile, context]);\n\n  return <div></div>;\n};\n\nexport default AuthCheck;\n"]},"metadata":{},"sourceType":"module"}